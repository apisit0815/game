<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏Å‡∏°‡πÅ‡∏¢‡∏Å‡∏Ç‡∏¢‡∏∞ Canvas Mode</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f9ff;
            font-family: 'Sarabun', sans-serif;
            overflow: hidden; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô scrollbar */
        }
        canvas {
            border: 2px solid #333;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            background-color: #fff;
            cursor: pointer; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏Ñ‡∏≠‡∏£‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÉ‡∏´‡πâ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å‡πÑ‡∏î‡πâ */
        }
    </style>
</head>
<body>

<canvas id="gameCanvas"></canvas>

<script>
    // --- 1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô ---
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏ô‡∏≤‡∏î Canvas
    const GAME_WIDTH = 600;
    const GAME_HEIGHT = 500;
    canvas.width = GAME_WIDTH;
    canvas.height = GAME_HEIGHT;

    let score = 0;
    let gameState = 'START'; // START, PLAYING, GAMEOVER

    // ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏∞
    const trashData = [
        { emoji: 'üçå', name: '‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏•‡πâ‡∏ß‡∏¢', type: 'organic' },
        { emoji: 'üêü', name: '‡∏Å‡πâ‡∏≤‡∏á‡∏õ‡∏•‡∏≤', type: 'organic' },
        { emoji: 'üçÇ', name: '‡πÉ‡∏ö‡πÑ‡∏°‡πâ‡πÅ‡∏´‡πâ‡∏á', type: 'organic' },
        { emoji: 'ü•§', name: '‡∏Ç‡∏ß‡∏î‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å', type: 'recycle' },
        { emoji: 'üìÑ', name: '‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏•‡∏±‡∏á', type: 'recycle' },
        { emoji: 'ü•´', name: '‡∏Å‡∏õ.‡∏ô‡πâ‡∏≥‡∏≠‡∏±‡∏î‡∏•‡∏°', type: 'recycle' },
        { emoji: 'ü•°', name: '‡∏ñ‡∏∏‡∏á‡πÄ‡∏õ‡∏∑‡πâ‡∏≠‡∏ô‡πÅ‡∏Å‡∏á', type: 'general' },
        { emoji: 'üßª', name: '‡∏ó‡∏¥‡∏ä‡∏ä‡∏π‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß', type: 'general' },
        { emoji: 'ü•¢', name: '‡∏ï‡∏∞‡πÄ‡∏Å‡∏µ‡∏¢‡∏ö‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß', type: 'general' },
        { emoji: 'üîã', name: '‡∏ñ‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏â‡∏≤‡∏¢', type: 'hazardous' },
        { emoji: 'üí°', name: '‡∏´‡∏•‡∏≠‡∏î‡πÑ‡∏ü‡πÅ‡∏ï‡∏Å', type: 'hazardous' },
        { emoji: 'üíä', name: '‡∏¢‡∏≤‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏', type: 'hazardous' }
    ];

    // ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞ 4 ‡πÉ‡∏ö
    const binHeight = 80;
    const binYPosition = GAME_HEIGHT - binHeight - 10;
    const bins = [
        { type: 'organic', color: '#27ae60', label: '‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß (‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å)', x: 10, width: 140 },
        { type: 'recycle', color: '#f1c40f', label: '‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á (‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•)', x: 160, width: 140 },
        { type: 'general', color: '#2980b9', label: '‡∏ü‡πâ‡∏≤ (‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)', x: 310, width: 140 },
        { type: 'hazardous', color: '#c0392b', label: '‡πÅ‡∏î‡∏á (‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢)', x: 460, width: 130 }
    ];

    // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏¢‡∏∞‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏´‡∏•‡πà‡∏ô
    let fallingTrash = null;
    let trashSpeed = 1.5; // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô

    // --- 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏° ---

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà
    function startNewGame() {
        score = 0;
        trashSpeed = 1.5;
        gameState = 'PLAYING';
        spawnTrash();
    }

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏¢‡∏∞‡∏ä‡∏¥‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô
    function spawnTrash() {
        const randomIndex = Math.floor(Math.random() * trashData.length);
        const data = trashData[randomIndex];
        fallingTrash = {
            x: GAME_WIDTH / 2, // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á
            y: -50, // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢
            data: data
        };
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏Ç‡∏¢‡∏∞‡πÉ‡∏´‡∏°‡πà‡∏°‡∏≤
        trashSpeed += 0.1;
    }

    // --- 3. Game Loop (‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Ç‡∏≠‡∏á Canvas) ---
    function gameLoop() {
        // 3.1 ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏¥‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡∏≤‡∏î‡πÉ‡∏´‡∏°‡πà
        ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);

        if (gameState === 'START') {
            drawStartScreen();
        } else if (gameState === 'PLAYING') {
            updateGame();
            drawGame();
        } else if (gameState === 'GAMEOVER') {
            drawGameOverScreen();
        }
        
        // ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ã‡πâ‡∏≥‡πÉ‡∏ô‡πÄ‡∏ü‡∏£‡∏°‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
        requestAnimationFrame(gameLoop);
    }

    // --- 4. ‡∏™‡πà‡∏ß‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏£‡∏£‡∏Å‡∏∞‡πÄ‡∏Å‡∏° (Update) ---
    function updateGame() {
        if (!fallingTrash) return;

        // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡∏¢‡∏∞‡∏´‡∏•‡πà‡∏ô‡∏•‡∏á‡∏°‡∏≤
        fallingTrash.y += trashSpeed;

        // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏Ç‡∏¢‡∏∞‡∏ï‡∏Å‡∏ñ‡∏∂‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á (‡πÄ‡∏•‡∏¢‡∏Ç‡∏≠‡∏ö‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞)
        if (fallingTrash.y > binYPosition + binHeight / 2) {
            // ‡∏ï‡∏Å‡∏û‡∏∑‡πâ‡∏ô = ‡πÄ‡∏Å‡∏°‡πÇ‡∏≠‡πÄ‡∏ß‡∏≠‡∏£‡πå
            gameState = 'GAMEOVER';
            fallingTrash = null;
        }
    }

    // --- 5. ‡∏™‡πà‡∏ß‡∏ô‡∏ß‡∏≤‡∏î‡∏†‡∏≤‡∏û (Draw) ---
    function drawGame() {
        // ‡∏ß‡∏≤‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
        ctx.fillStyle = '#333';
        ctx.font = '24px Sarabun';
        ctx.textAlign = 'left';
        ctx.fillText('‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ' + score, 20, 40);

        // ‡∏ß‡∏≤‡∏î‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞
        bins.forEach(bin => {
            // ‡∏ï‡∏±‡∏ß‡∏ñ‡∏±‡∏á
            ctx.fillStyle = bin.color;
            if (ctx.roundRect) {
                ctx.beginPath();
                ctx.roundRect(bin.x, binYPosition, bin.width, binHeight, 10);
                ctx.fill();
            } else {
                ctx.fillRect(bin.x, binYPosition, bin.width, binHeight);
            }
            
            // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏ô‡∏ñ‡∏±‡∏á
            ctx.fillStyle = 'white';
            ctx.font = '16px Sarabun';
            ctx.textAlign = 'center';
            ctx.fillText(bin.label, bin.x + bin.width / 2, binYPosition + binHeight / 2 + 5);
        });

        // ‡∏ß‡∏≤‡∏î‡∏Ç‡∏¢‡∏∞‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏´‡∏•‡πà‡∏ô
        if (fallingTrash) {
            ctx.textAlign = 'center';
            // ‡∏ß‡∏≤‡∏î Emoji
            ctx.font = '40px Sarabun';
            ctx.fillText(fallingTrash.data.emoji, fallingTrash.x, fallingTrash.y);
            // ‡∏ß‡∏≤‡∏î‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏¢‡∏∞‡πÉ‡∏ï‡πâ Emoji
            ctx.fillStyle = '#333';
            ctx.font = '18px Sarabun';
            ctx.fillText(fallingTrash.data.name, fallingTrash.x, fallingTrash.y + 30);
        }
    }

    function drawStartScreen() {
        ctx.fillStyle = '#2c3e50';
        ctx.font = 'bold 30px Sarabun';
        ctx.textAlign = 'center';
        ctx.fillText('‚ôªÔ∏è ‡πÄ‡∏Å‡∏°‡πÅ‡∏¢‡∏Å‡∏Ç‡∏¢‡∏∞‡∏û‡∏¥‡∏ó‡∏±‡∏Å‡∏©‡πå‡πÇ‡∏•‡∏Å', GAME_WIDTH / 2, GAME_HEIGHT / 2 - 30);
        ctx.font = '20px Sarabun';
        ctx.fillText('‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°!', GAME_WIDTH / 2, GAME_HEIGHT / 2 + 20);
        ctx.fillText('(‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó)', GAME_WIDTH / 2, GAME_HEIGHT / 2 + 60);
    }

    function drawGameOverScreen() {
        ctx.fillStyle = '#c0392b';
        ctx.font = 'bold 40px Sarabun';
        ctx.textAlign = 'center';
        ctx.fillText('Game Over!', GAME_WIDTH / 2, GAME_HEIGHT / 2 - 20);
        ctx.fillStyle = '#333';
        ctx.font = '24px Sarabun';
        ctx.fillText('‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: ' + score, GAME_WIDTH / 2, GAME_HEIGHT / 2 + 30);
        ctx.font = '20px Sarabun';
        ctx.fillText('‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà', GAME_WIDTH / 2, GAME_HEIGHT / 2 + 80);
    }

    // --- 6. ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏°‡∏≤‡∏™‡πå) ---
    canvas.addEventListener('click', (e) => {
        const rect = canvas.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const clickY = e.clientY - rect.top;

        if (gameState === 'START' || gameState === 'GAMEOVER') {
            startNewGame();
            return;
        }

        if (gameState === 'PLAYING' && fallingTrash) {
            // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å‡πÇ‡∏î‡∏ô‡∏ñ‡∏±‡∏á‡πÉ‡∏ö‡πÑ‡∏´‡∏ô
            bins.forEach(bin => {
                if (clickX >= bin.x && clickX <= bin.x + bin.width &&
                    clickY >= binYPosition && clickY <= binYPosition + binHeight) {
                    
                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
                    if (bin.type === fallingTrash.data.type) {
                        // ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!
                        score += 10;
                        spawnTrash(); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Ç‡∏¢‡∏∞‡∏ä‡∏¥‡πâ‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
                    } else {
                        // ‡∏ú‡∏¥‡∏î! (‡∏à‡∏ö‡πÄ‡∏Å‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ)
                        gameState = 'GAMEOVER';
                    }
                }
            });
        }
    });

    // --- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏ô‡πÄ‡∏Å‡∏° ---
    const fontLink = document.createElement('link');
    fontLink.href = "https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap";
    fontLink.rel = "stylesheet";
    document.head.appendChild(fontLink);

    // ‡∏£‡∏≠‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÇ‡∏´‡∏•‡∏î‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°
    setTimeout(() => {
        gameLoop();
    }, 500);
</script>

</body>
</html>
