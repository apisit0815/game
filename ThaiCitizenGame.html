<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏î‡∏µ ‡∏ß‡∏¥‡∏ñ‡∏µ‡πÑ‡∏ó‡∏¢ (Civic Duty Quest)</title>
    <!-- Import Google Fonts: Prompt -->
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Import Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom Config for Brand Colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Prompt', 'sans-serif'],
                    },
                    colors: {
                        civic: {
                            blue: '#1E40AF', // Royal Blue
                            light: '#EFF6FF', // Light Blue Background
                            yellow: '#FACC15', // Gold/Yellow
                            accent: '#3B82F6'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom Animations */
        body {
            font-family: 'Prompt', sans-serif;
            background-color: #f3f4f6;
            overflow-x: hidden;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        .slide-up {
            animation: slideUp 0.4s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .btn-hover {
            transition: all 0.2s ease;
        }
        .btn-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        /* Stat Bar Transition */
        .stat-bar-fill {
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.3s ease;
        }
    </style>
</head>
<body class="bg-slate-100 min-h-screen flex items-center justify-center p-4">

    <!-- Main Game Container -->
    <div id="app" class="w-full max-w-md bg-white rounded-2xl shadow-xl overflow-hidden relative min-h-[600px] flex flex-col">
        
        <!-- Header / HUD (Always visible during game) -->
        <header id="hud" class="hidden bg-civic-blue text-white p-4 shadow-md z-10">
            <div class="flex justify-between items-center mb-2">
                <h1 class="text-lg font-bold">üì¢ ‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏î‡∏µ ‡∏ß‡∏¥‡∏ñ‡∏µ‡πÑ‡∏ó‡∏¢</h1>
                <span class="text-xs bg-white/20 px-2 py-1 rounded-full">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà <span id="q-current">1</span>/5</span>
            </div>
            
            <!-- Stats Grid -->
            <div class="space-y-3">
                <!-- Law Stat -->
                <div>
                    <div class="flex justify-between text-xs mb-1">
                        <span>‚öñÔ∏è ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢</span>
                        <span id="val-law">50%</span>
                    </div>
                    <div class="w-full bg-blue-900/30 rounded-full h-2.5">
                        <div id="bar-law" class="stat-bar-fill bg-blue-400 h-2.5 rounded-full" style="width: 50%"></div>
                    </div>
                </div>
                <!-- Public Spirit Stat -->
                <div>
                    <div class="flex justify-between text-xs mb-1">
                        <span>‚ù§Ô∏è ‡∏à‡∏¥‡∏ï‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞</span>
                        <span id="val-public">50%</span>
                    </div>
                    <div class="w-full bg-blue-900/30 rounded-full h-2.5">
                        <div id="bar-public" class="stat-bar-fill bg-green-400 h-2.5 rounded-full" style="width: 50%"></div>
                    </div>
                </div>
                <!-- Happiness Stat -->
                <div>
                    <div class="flex justify-between text-xs mb-1">
                        <span>üòä ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç</span>
                        <span id="val-happy">50%</span>
                    </div>
                    <div class="w-full bg-blue-900/30 rounded-full h-2.5">
                        <div id="bar-happy" class="stat-bar-fill bg-yellow-400 h-2.5 rounded-full" style="width: 50%"></div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Content Area -->
        <main class="flex-grow relative flex flex-col">
            
            <!-- 1. Start Screen -->
            <div id="start-screen" class="absolute inset-0 flex flex-col items-center justify-center p-8 text-center bg-gradient-to-b from-blue-50 to-white fade-in z-20">
                <div class="text-6xl mb-4">üáπüá≠</div>
                <h1 class="text-3xl font-bold text-civic-blue mb-2">‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏î‡∏µ<br><span class="text-civic-yellow text-4xl stroke-text">‡∏ß‡∏¥‡∏ñ‡∏µ‡πÑ‡∏ó‡∏¢</span></h1>
                <p class="text-gray-500 mb-8 mt-2">‡πÄ‡∏Å‡∏°‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ß‡∏±‡∏î‡πÉ‡∏à<br>‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô‡πÉ‡∏ô‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡πÑ‡∏ó‡∏¢?</p>
                
                <div class="bg-blue-50 p-4 rounded-xl border border-blue-100 text-sm text-left mb-8 w-full shadow-inner">
                    <p class="font-semibold mb-2 text-civic-blue">‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</p>
                    <ul class="space-y-1 text-gray-600">
                        <li>‚öñÔ∏è ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á</li>
                        <li>‚ù§Ô∏è ‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡πÉ‡∏à‡∏ï‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå</li>
                        <li>üòä ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢!</li>
                    </ul>
                </div>

                <button onclick="game.start()" class="w-full bg-civic-blue hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-xl shadow-lg btn-hover text-lg">
                    ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÄ‡∏•‡∏¢! üöÄ
                </button>
            </div>

            <!-- 2. Gameplay Screen -->
            <div id="game-screen" class="hidden flex-col flex-grow p-6 fade-in pb-20 overflow-y-auto">
                <!-- Scenario Image/Icon -->
                <div class="flex justify-center mb-6 mt-2">
                    <div id="scenario-emoji" class="text-8xl drop-shadow-md animate-bounce-slow">üö¶</div>
                </div>

                <!-- Question Card -->
                <div class="bg-white rounded-xl mb-6">
                    <h2 id="scenario-title" class="text-xl font-bold text-gray-800 mb-2">‡πÅ‡∏¢‡∏Å‡πÑ‡∏ü‡πÅ‡∏î‡∏á‡∏ß‡∏±‡∏î‡πÉ‡∏à</h2>
                    <p id="scenario-desc" class="text-gray-600 leading-relaxed">
                        ‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏µ‡∏ö‡πÑ‡∏õ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏°‡∏≤‡∏Å ‡∏™‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏î‡πâ‡∏ß‡∏¢ ‡πÅ‡∏ï‡πà‡∏û‡∏≠‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏™‡∏µ‡πà‡πÅ‡∏¢‡∏Å ‡πÑ‡∏ü‡∏à‡∏£‡∏≤‡∏à‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô "‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á" ‡∏û‡∏≠‡∏î‡∏µ...
                    </p>
                </div>

                <!-- Choices -->
                <div id="choices-container" class="space-y-3 mt-auto">
                    <!-- Buttons will be injected here via JS -->
                </div>
            </div>

            <!-- 3. Feedback Overlay (Modal) -->
            <div id="feedback-overlay" class="hidden absolute inset-0 bg-black/80 z-30 flex items-center justify-center p-6 backdrop-blur-sm">
                <div class="bg-white w-full rounded-2xl p-6 text-center shadow-2xl slide-up border-t-4 border-civic-yellow">
                    <div id="feedback-icon" class="text-5xl mb-3">‚úÖ</div>
                    <h3 id="feedback-title" class="text-xl font-bold text-gray-800 mb-2">‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÑ‡∏î‡πâ‡∏î‡∏µ!</h3>
                    <p id="feedback-desc" class="text-gray-600 mb-4 text-sm">‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏≤‡∏£‡∏û‡∏Å‡∏é‡∏à‡∏£‡∏≤‡∏à‡∏£‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏ ‡πÅ‡∏°‡πâ‡∏à‡∏∞‡∏™‡∏≤‡∏¢‡∏´‡∏ô‡πà‡∏≠‡∏¢‡πÅ‡∏ï‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ä‡∏±‡∏ß‡∏£‡πå</p>
                    
                    <!-- Stat Changes Summary -->
                    <div class="bg-gray-100 rounded-lg p-3 mb-6 text-sm grid grid-cols-3 gap-2">
                        <div class="flex flex-col">
                            <span class="text-xs text-gray-500">‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢</span>
                            <span id="change-law" class="font-bold text-green-600">+10</span>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-xs text-gray-500">‡∏à‡∏¥‡∏ï‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞</span>
                            <span id="change-public" class="font-bold text-green-600">+5</span>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-xs text-gray-500">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç</span>
                            <span id="change-happy" class="font-bold text-red-500">-5</span>
                        </div>
                    </div>

                    <button onclick="game.next()" class="w-full bg-civic-yellow hover:bg-yellow-500 text-blue-900 font-bold py-3 px-6 rounded-xl shadow-md btn-hover">
                        ‡πÑ‡∏õ‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡πÑ‡∏õ ‚û°Ô∏è
                    </button>
                </div>
            </div>

            <!-- 4. End Screen -->
            <div id="end-screen" class="hidden absolute inset-0 bg-white z-20 flex flex-col items-center p-6 overflow-y-auto">
                <div class="text-center mt-8 mb-6">
                    <h2 class="text-2xl font-bold text-gray-800">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h2>
                    <p class="text-gray-500 text-sm">‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÅ‡∏ö‡∏ö‡πÑ‡∏´‡∏ô‡∏Å‡∏±‡∏ô‡∏ô‡∏∞?</p>
                </div>

                <!-- Rank Card -->
                <div class="w-full bg-gradient-to-br from-civic-blue to-blue-800 text-white rounded-2xl p-6 text-center shadow-lg mb-6 relative overflow-hidden">
                    <div class="absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white opacity-10 rounded-full"></div>
                    
                    <div id="final-emoji" class="text-6xl mb-2 relative z-10">üèÜ</div>
                    <div class="text-sm opacity-80 mb-1">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á</div>
                    <h1 id="final-rank" class="text-3xl font-bold text-civic-yellow mb-2">‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏î‡∏µ‡πÄ‡∏î‡πà‡∏ô</h1>
                    <p id="final-comment" class="text-sm font-light opacity-90">‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏™‡∏±‡∏á‡∏Ñ‡∏° ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏µ‡πÑ‡∏ß‡πâ‡∏ô‡∏∞!</p>
                </div>

                <!-- Final Stats -->
                <div class="w-full space-y-4 mb-8">
                    <div class="flex items-center">
                        <span class="w-8 text-xl">‚öñÔ∏è</span>
                        <div class="flex-1 ml-3">
                            <div class="flex justify-between text-xs text-gray-500 mb-1"><span>‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢</span><span id="end-law">80%</span></div>
                            <div class="h-2 w-full bg-gray-200 rounded-full"><div id="end-bar-law" class="h-2 bg-blue-500 rounded-full" style="width: 80%"></div></div>
                        </div>
                    </div>
                    <div class="flex items-center">
                        <span class="w-8 text-xl">‚ù§Ô∏è</span>
                        <div class="flex-1 ml-3">
                            <div class="flex justify-between text-xs text-gray-500 mb-1"><span>‡∏à‡∏¥‡∏ï‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞</span><span id="end-public">65%</span></div>
                            <div class="h-2 w-full bg-gray-200 rounded-full"><div id="end-bar-public" class="h-2 bg-green-500 rounded-full" style="width: 65%"></div></div>
                        </div>
                    </div>
                    <div class="flex items-center">
                        <span class="w-8 text-xl">üòä</span>
                        <div class="flex-1 ml-3">
                            <div class="flex justify-between text-xs text-gray-500 mb-1"><span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç</span><span id="end-happy">40%</span></div>
                            <div class="h-2 w-full bg-gray-200 rounded-full"><div id="end-bar-happy" class="h-2 bg-yellow-500 rounded-full" style="width: 40%"></div></div>
                        </div>
                    </div>
                </div>

                <button onclick="game.restart()" class="w-full bg-gray-800 hover:bg-black text-white font-bold py-4 px-8 rounded-xl shadow-lg btn-hover mt-auto mb-4">
                    üîÑ ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                </button>
            </div>

        </main>
    </div>

    <!-- Game Logic -->
    <script>
        // Data: 5 Scenarios
        const scenarios = [
            {
                id: 1,
                title: "üö¶ ‡πÅ‡∏¢‡∏Å‡πÑ‡∏ü‡πÅ‡∏î‡∏á‡∏ß‡∏±‡∏î‡πÉ‡∏à",
                desc: "‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ç‡∏±‡∏ö‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏ã‡∏Ñ‡πå‡∏£‡∏µ‡∏ö‡πÑ‡∏õ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏™‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡∏™‡∏µ‡πà‡πÅ‡∏¢‡∏Å ‡πÑ‡∏ü‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏õ‡πá‡∏ô '‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á' ‡∏û‡∏≠‡∏î‡∏µ...",
                emoji: "üõµ",
                choices: [
                    {
                        text: "‡πÄ‡∏ö‡∏£‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡∏´‡∏¢‡∏∏‡∏î‡∏£‡∏≠‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏™‡πâ‡∏ô",
                        feedback: {
                            title: "‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô!",
                            desc: "‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å! ‡πÅ‡∏°‡πâ‡∏à‡∏∞‡∏™‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏≤‡∏£‡∏û‡∏Å‡∏é‡∏à‡∏£‡∏≤‡∏à‡∏£‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏",
                            icon: "üëç"
                        },
                        effects: { law: 15, public: 5, happy: -10 } // ‡πÄ‡∏™‡∏µ‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏õ‡∏™‡∏≤‡∏¢
                    },
                    {
                        text: "‡∏ö‡∏¥‡∏î‡∏´‡∏°‡∏î‡∏õ‡∏•‡∏≠‡∏Å ‡∏ù‡πà‡∏≤‡πÑ‡∏õ‡πÄ‡∏•‡∏¢!",
                        feedback: {
                            title: "‡∏´‡∏ß‡∏≤‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏ß!",
                            desc: "‡∏Ñ‡∏∏‡∏ì‡∏ù‡πà‡∏≤‡∏ù‡∏∑‡∏ô‡∏Å‡∏é‡∏à‡∏£‡∏≤‡∏à‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≠‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô ‡πÅ‡∏°‡πâ‡∏à‡∏∞‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏±‡∏ô‡πÉ‡∏à‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏∞",
                            icon: "üò±"
                        },
                        effects: { law: -20, public: -10, happy: 10 } // ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ó‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤
                    }
                ]
            },
            {
                id: 2,
                title: "üóëÔ∏è ‡πÅ‡∏Å‡πâ‡∏ß‡∏ô‡πâ‡∏≥‡πÄ‡∏à‡πâ‡∏≤‡∏õ‡∏±‡∏ç‡∏´‡∏≤",
                desc: "‡∏Ñ‡∏∏‡∏ì‡∏î‡∏∑‡πà‡∏°‡∏ä‡∏≤‡∏ô‡∏°‡πÑ‡∏Ç‡πà‡∏°‡∏∏‡∏Å‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏ó‡∏¥‡πâ‡∏á‡πÅ‡∏Å‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡∏ñ‡∏±‡∏á‡∏Ç‡∏¢‡∏∞‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ï‡∏£‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏ô‡∏•‡πâ‡∏ô...",
                emoji: "ü•§",
                choices: [
                    {
                        text: "‡∏ß‡∏≤‡∏á‡πÅ‡∏õ‡∏∞‡πÑ‡∏ß‡πâ‡∏Ç‡πâ‡∏≤‡∏á‡∏ö‡∏ô‡∏ñ‡∏±‡∏á‡∏ô‡∏±‡πà‡∏ô‡πÅ‡∏´‡∏•‡∏∞",
                        feedback: {
                            title: "‡∏°‡∏±‡∏Å‡∏á‡πà‡∏≤‡∏¢‡πÑ‡∏õ‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏ô‡∏∞",
                            desc: "‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡∏ó‡∏¥‡πâ‡∏á‡πÑ‡∏ß‡πâ‡πÅ‡∏ö‡∏ö‡∏ô‡∏±‡πâ‡∏ô‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡∏¢‡∏∞‡∏´‡∏Å‡πÄ‡∏•‡∏≠‡∏∞‡πÄ‡∏ó‡∏≠‡∏∞ ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏£‡∏∞‡∏Ñ‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡∏Å‡∏ß‡∏≤‡∏î",
                            icon: "üßπ"
                        },
                        effects: { law: -5, public: -20, happy: 5 } // ‡∏™‡∏ö‡∏≤‡∏¢‡∏ï‡∏±‡∏ß
                    },
                    {
                        text: "‡∏ñ‡∏∑‡∏≠‡πÑ‡∏õ‡∏ó‡∏¥‡πâ‡∏á‡∏ñ‡∏±‡∏á‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á",
                        feedback: {
                            title: "‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î‡∏à‡∏¥‡∏ï‡∏™‡∏≥‡∏ô‡∏∂‡∏Å!",
                            desc: "‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏≠‡∏°‡∏•‡∏≥‡∏ö‡∏≤‡∏Å‡∏ñ‡∏∑‡∏≠‡∏Ç‡∏¢‡∏∞‡πÄ‡∏î‡∏¥‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ç‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏ß‡∏°",
                            icon: "‚ú®"
                        },
                        effects: { law: 5, public: 15, happy: -5 } // ‡∏´‡∏ô‡∏±‡∏Å‡∏°‡∏∑‡∏≠‡∏´‡∏ô‡πà‡∏≠‡∏¢
                    }
                ]
            },
            {
                id: 3,
                title: "üèß ‡∏Ñ‡∏¥‡∏ß ATM ‡∏¢‡∏≤‡∏ß‡πÄ‡∏´‡∏¢‡∏µ‡∏¢‡∏î",
                desc: "‡∏Ñ‡∏∏‡∏ì‡∏ï‡πà‡∏≠‡∏Ñ‡∏¥‡∏ß‡∏Å‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡πÅ‡∏ï‡πà‡∏õ‡πâ‡∏≤‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ä‡πâ‡∏≤‡∏°‡∏≤‡∏Å ‡∏î‡∏π‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏à‡∏∞‡∏Å‡∏î‡∏ú‡∏¥‡∏î‡πÜ ‡∏ñ‡∏π‡∏Å‡πÜ ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≠‡∏ö...",
                emoji: "üèß",
                choices: [
                    {
                        text: "‡∏ö‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á ‡∏Å‡∏î‡∏î‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏õ‡πâ‡∏≤‡∏£‡∏µ‡∏ö",
                        feedback: {
                            title: "‡πÉ‡∏à‡∏£‡πâ‡∏≠‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ",
                            desc: "‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏¥‡∏£‡∏¥‡∏¢‡∏≤‡πÑ‡∏°‡πà‡∏û‡∏≠‡πÉ‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡πÅ‡∏¢‡πà ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏≤‡∏£‡∏û‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô",
                            icon: "üò§"
                        },
                        effects: { law: 0, public: -15, happy: 5 } // ‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå
                    },
                    {
                        text: "‡∏£‡∏≠‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏à‡πÄ‡∏¢‡πá‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ñ‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢",
                        feedback: {
                            title: "‡∏ô‡πâ‡∏≥‡πÉ‡∏à‡∏á‡∏≤‡∏°",
                            desc: "‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏î‡∏ó‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏≠‡∏∑‡πâ‡∏≠‡πÄ‡∏ü‡∏∑‡πâ‡∏≠‡∏ï‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏∑‡∏≠‡∏ß‡∏¥‡∏ñ‡∏µ‡πÑ‡∏ó‡∏¢‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏ä‡∏∑‡πà‡∏ô‡∏ä‡∏°",
                            icon: "üòä"
                        },
                        effects: { law: 0, public: 15, happy: -5 } // ‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏ß‡∏•‡∏≤
                    }
                ]
            },
            {
                id: 4,
                title: "üì± ‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏´‡∏•‡∏∏‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏´‡πâ‡∏≠‡∏á",
                desc: "‡πÉ‡∏ô‡∏Å‡∏£‡∏∏‡πä‡∏õ‡πÅ‡∏ä‡∏ó‡∏°‡∏µ‡∏Ñ‡∏ô‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡∏´‡∏•‡∏∏‡∏î‡∏ï‡∏•‡∏Å‡πÜ ‡∏Ç‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏Ñ‡πà‡∏≠‡∏¢‡∏ä‡∏≠‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà...",
                emoji: "üì±",
                choices: [
                    {
                        text: "‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏≠‡∏∑‡πà‡∏ô‡∏î‡∏π‡∏Ç‡∏≥‡πÜ",
                        feedback: {
                            title: "‡∏ú‡∏¥‡∏î ‡∏û.‡∏£.‡∏ö. ‡∏Ñ‡∏≠‡∏°‡∏Ø!",
                            desc: "‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏ó‡∏≤‡∏á‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏î‡∏à‡∏£‡∏¥‡∏¢‡∏ò‡∏£‡∏£‡∏°",
                            icon: "üö´"
                        },
                        effects: { law: -25, public: -20, happy: 10 } // ‡∏™‡∏ô‡∏∏‡∏Å‡∏õ‡∏≤‡∏Å
                    },
                    {
                        text: "‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠ ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏¢‡∏∏‡πà‡∏á‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß",
                        feedback: {
                            title: "Cyber Hero!",
                            desc: "‡∏Ñ‡∏∏‡∏ì‡∏ä‡πà‡∏ß‡∏¢‡∏´‡∏¢‡∏∏‡∏î‡∏ß‡∏á‡∏à‡∏£‡∏Å‡∏≤‡∏£ Cyberbullying ‡πÅ‡∏•‡∏∞‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô",
                            icon: "üõ°Ô∏è"
                        },
                        effects: { law: 10, public: 20, happy: -5 } // ‡∏≠‡∏≤‡∏à‡πÇ‡∏î‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏ã‡∏ß‡∏ß‡πà‡∏≤‡πÇ‡∏•‡∏Å‡∏™‡∏ß‡∏¢
                    }
                ]
            },
            {
                id: 5,
                title: "üó≥Ô∏è ‡∏§‡∏î‡∏π‡∏Å‡∏≤‡∏•‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á",
                desc: "‡∏°‡∏µ‡∏´‡∏±‡∏ß‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏û‡∏£‡∏£‡∏Ñ‡∏´‡∏ô‡∏∂‡πà‡∏á ‡∏°‡∏≤‡πÄ‡∏Ñ‡∏≤‡∏∞‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏ö‡πâ‡∏≤‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏¢‡∏∑‡πà‡∏ô‡πÄ‡∏á‡∏¥‡∏ô 500 ‡∏ö‡∏≤‡∏ó ‡∏ö‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ...",
                emoji: "üí∞",
                choices: [
                    {
                        text: "‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏ß‡πâ (‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏≤‡∏Å‡∏≤‡πÑ‡∏°‡πà‡∏Å‡∏≤‡∏≠‡∏µ‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á)",
                        feedback: {
                            title: "‡∏≠‡∏¢‡πà‡∏≤‡∏´‡∏≤‡∏ó‡∏≥!",
                            desc: "‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ñ‡∏∑‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏∏‡∏à‡∏£‡∏¥‡∏ï‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á ‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏ß‡∏á‡∏à‡∏£‡∏≠‡∏∏‡∏ö‡∏≤‡∏ó‡∏ß‡πå",
                            icon: "üí∏"
                        },
                        effects: { law: -30, public: -25, happy: 20 } // ‡πÑ‡∏î‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏ü‡∏£‡∏µ
                    },
                    {
                        text: "‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡πÅ‡∏•‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ö‡∏≤‡∏∞‡πÅ‡∏™",
                        feedback: {
                            title: "‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ò‡∏¥‡∏õ‡πÑ‡∏ï‡∏¢",
                            desc: "‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏∑‡∏ô‡∏´‡∏¢‡∏±‡∏î‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏£‡∏≤",
                            icon: "üó≥Ô∏è"
                        },
                        effects: { law: 20, public: 20, happy: 0 } // ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏µ‡∏¢
                    }
                ]
            }
        ];

        // Game State Engine
        const game = {
            currentIdx: 0,
            stats: {
                law: 50,
                public: 50,
                happy: 50
            },
            
            elements: {
                startScreen: document.getElementById('start-screen'),
                gameScreen: document.getElementById('game-screen'),
                endScreen: document.getElementById('end-screen'),
                hud: document.getElementById('hud'),
                feedbackOverlay: document.getElementById('feedback-overlay'),
                // Stats UI
                valLaw: document.getElementById('val-law'),
                valPublic: document.getElementById('val-public'),
                valHappy: document.getElementById('val-happy'),
                barLaw: document.getElementById('bar-law'),
                barPublic: document.getElementById('bar-public'),
                barHappy: document.getElementById('bar-happy'),
                // Scenario UI
                qCurrent: document.getElementById('q-current'),
                sEmoji: document.getElementById('scenario-emoji'),
                sTitle: document.getElementById('scenario-title'),
                sDesc: document.getElementById('scenario-desc'),
                choicesContainer: document.getElementById('choices-container'),
                // Feedback UI
                fTitle: document.getElementById('feedback-title'),
                fDesc: document.getElementById('feedback-desc'),
                fIcon: document.getElementById('feedback-icon'),
                cLaw: document.getElementById('change-law'),
                cPublic: document.getElementById('change-public'),
                cHappy: document.getElementById('change-happy'),
                // End UI
                eRank: document.getElementById('final-rank'),
                eComment: document.getElementById('final-comment'),
                eEmoji: document.getElementById('final-emoji'),
                eLaw: document.getElementById('end-law'),
                ePublic: document.getElementById('end-public'),
                eHappy: document.getElementById('end-happy'),
                ebLaw: document.getElementById('end-bar-law'),
                ebPublic: document.getElementById('end-bar-public'),
                ebHappy: document.getElementById('end-bar-happy'),
            },

            start() {
                this.resetStats();
                this.currentIdx = 0;
                this.elements.startScreen.classList.add('hidden');
                this.elements.endScreen.classList.add('hidden');
                this.elements.hud.classList.remove('hidden');
                this.elements.gameScreen.classList.remove('hidden');
                this.elements.gameScreen.classList.add('flex');
                this.updateStatsUI();
                this.renderScenario();
            },

            resetStats() {
                this.stats = { law: 50, public: 50, happy: 50 };
            },

            updateStatsUI() {
                const updateBar = (idVal, idBar, value) => {
                    idVal.innerText = `${value}%`;
                    idBar.style.width = `${value}%`;
                    // Color Logic
                    idBar.className = `stat-bar-fill h-2.5 rounded-full ${
                        value < 30 ? 'bg-red-500' : 
                        value < 60 ? 'bg-yellow-400' : 'bg-green-500'
                    }`;
                };

                updateBar(this.elements.valLaw, this.elements.barLaw, this.stats.law);
                updateBar(this.elements.valPublic, this.elements.barPublic, this.stats.public);
                updateBar(this.elements.valHappy, this.elements.barHappy, this.stats.happy);
            },

            renderScenario() {
                const current = scenarios[this.currentIdx];
                this.elements.qCurrent.innerText = this.currentIdx + 1;
                this.elements.sEmoji.innerText = current.emoji;
                this.elements.sTitle.innerText = current.title;
                this.elements.sDesc.innerText = current.desc;

                // Generate Choices
                this.elements.choicesContainer.innerHTML = '';
                current.choices.forEach((choice, index) => {
                    const btn = document.createElement('button');
                    btn.className = "w-full text-left bg-white border border-gray-200 hover:border-civic-blue hover:bg-blue-50 p-4 rounded-xl shadow-sm transition-all duration-200 group";
                    btn.onclick = () => this.handleChoice(choice);
                    
                    const innerHTML = `
                        <div class="flex items-center">
                            <span class="bg-gray-100 text-gray-600 font-bold w-8 h-8 flex items-center justify-center rounded-full mr-3 group-hover:bg-civic-blue group-hover:text-white transition-colors">
                                ${String.fromCharCode(65 + index)}
                            </span>
                            <span class="font-medium text-gray-700 group-hover:text-civic-blue">${choice.text}</span>
                        </div>
                    `;
                    btn.innerHTML = innerHTML;
                    this.elements.choicesContainer.appendChild(btn);
                });
                
                // Reset scroll
                this.elements.gameScreen.scrollTop = 0;
            },

            handleChoice(choice) {
                // Apply Stats
                this.stats.law = this.clamp(this.stats.law + choice.effects.law);
                this.stats.public = this.clamp(this.stats.public + choice.effects.public);
                this.stats.happy = this.clamp(this.stats.happy + choice.effects.happy);
                
                this.updateStatsUI();

                // Show Feedback
                this.elements.fTitle.innerText = choice.feedback.title;
                this.elements.fDesc.innerText = choice.feedback.desc;
                this.elements.fIcon.innerText = choice.feedback.icon;

                const formatChange = (val) => val > 0 ? `+${val}` : `${val}`;
                const formatColor = (val) => val > 0 ? 'text-green-600' : (val < 0 ? 'text-red-500' : 'text-gray-500');

                this.elements.cLaw.innerText = formatChange(choice.effects.law);
                this.elements.cLaw.className = `font-bold ${formatColor(choice.effects.law)}`;

                this.elements.cPublic.innerText = formatChange(choice.effects.public);
                this.elements.cPublic.className = `font-bold ${formatColor(choice.effects.public)}`;

                this.elements.cHappy.innerText = formatChange(choice.effects.happy);
                this.elements.cHappy.className = `font-bold ${formatColor(choice.effects.happy)}`;

                this.elements.feedbackOverlay.classList.remove('hidden');
            },

            next() {
                this.elements.feedbackOverlay.classList.add('hidden');
                this.currentIdx++;
                
                if (this.currentIdx < scenarios.length) {
                    this.renderScenario();
                } else {
                    this.endGame();
                }
            },

            endGame() {
                this.elements.gameScreen.classList.add('hidden');
                this.elements.hud.classList.add('hidden');
                this.elements.endScreen.classList.remove('hidden');

                // Fill Stats in End Screen
                this.elements.eLaw.innerText = this.stats.law + "%";
                this.elements.ebLaw.style.width = this.stats.law + "%";
                this.elements.ePublic.innerText = this.stats.public + "%";
                this.elements.ebPublic.style.width = this.stats.public + "%";
                this.elements.eHappy.innerText = this.stats.happy + "%";
                this.elements.ebHappy.style.width = this.stats.happy + "%";

                // Calculate Rank
                const avg = (this.stats.law + this.stats.public + this.stats.happy) / 3;
                let rankData = {};

                if (avg >= 80) {
                    rankData = { title: "‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏û‡∏ä‡∏£ üíé", desc: "‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î! ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏ï‡πâ‡∏ô‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡∏ì‡∏ò‡∏£‡∏£‡∏°", emoji: "üëë" };
                } else if (avg >= 60) {
                    rankData = { title: "‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏î‡∏µ‡πÄ‡∏î‡πà‡∏ô ü•á", desc: "‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏à‡∏¥‡∏ï‡πÉ‡∏à‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°", emoji: "üåü" };
                } else if (avg >= 40) {
                    rankData = { title: "‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ü•à", desc: "‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô ‡∏•‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏™‡πà‡πÉ‡∏à‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡∏à‡∏∞‡∏î‡∏µ‡∏°‡∏≤‡∏Å", emoji: "üôÇ" };
                } else {
                    rankData = { title: "‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î ü•â", desc: "‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏ó‡πâ‡∏≠! ‡∏•‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏é‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡πÉ‡∏´‡πâ‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏£‡∏≠‡∏ö‡∏´‡∏ô‡πâ‡∏≤", emoji: "üå±" };
                }

                this.elements.eRank.innerText = rankData.title;
                this.elements.eComment.innerText = rankData.desc;
                this.elements.eEmoji.innerText = rankData.emoji;
            },

            restart() {
                this.start();
            },

            clamp(val) {
                return Math.min(100, Math.max(0, val));
            }
        };

    </script>
</body>
</html>
